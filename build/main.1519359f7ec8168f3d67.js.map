{"version":3,"sources":["webpack:///./templates/template.hbs","webpack:///./js/refs.js","webpack:///./js/apiService.js","webpack:///./js/renderApi.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","helper","alias1","lambda","alias2","escapeExpression","alias3","nullContext","alias4","hooks","helperMissing","alias5","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","program","noop","body","document","querySelector","form","getElementById","input","galleryList","query","additionalUrl","fetch","result","json","console","log","defaultModules","set","PNotifyMobile","newRender","this","page","perPage","newQuery","fetchApi","showMore","apiService","hits","length","error","text","hide","delay","videos","refs","insertAdjacentHTML","addEventListener","event","preventDefault","innerHTML","target","elements","value","nodeName","srcModal","dataset","src","basicLightbox","show","InfiniteScroll","path","history","on"],"mappings":"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","file":"main.1519359f7ec8168f3d67.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), alias4=container.hooks.helperMissing, alias5=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\n    <div class=\\\"wrapper-video\\\"> <video controls=\\\"controls\\\" class=\\\"wrapper-video\\\" src=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"videos\") : depth0)) != null ? lookupProperty(stack1,\"tiny\") : stack1)) != null ? lookupProperty(stack1,\"url\") : stack1), depth0))\n    + \"\\\"\\n            data-src=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"videos\") : depth0)) != null ? lookupProperty(stack1,\"medium\") : stack1)) != null ? lookupProperty(stack1,\"url\") : stack1), depth0))\n    + \"\\\" width=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"videos\") : depth0)) != null ? lookupProperty(stack1,\"tiny\") : stack1)) != null ? lookupProperty(stack1,\"width\") : stack1), depth0))\n    + \"\\\" height=\\\" \"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"videos\") : depth0)) != null ? lookupProperty(stack1,\"tiny\") : stack1)) != null ? lookupProperty(stack1,\"height\") : stack1), depth0))\n    + \"\\\"></video>\\n    </div>\\n\\n    <div class=\\\"wrapper-details\\\">\\n        <p><i class=\\\"material-icons\\\">thumb_up</i>\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":49},\"end\":{\"line\":8,\"column\":58}}}) : helper)))\n    + \"</p>\\n        <p><i class=\\\"material-icons\\\">comment</i>\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":48},\"end\":{\"line\":9,\"column\":60}}}) : helper)))\n    + \"</p>\\n        <p><i class=\\\"material-icons\\\">cloud_download</i>\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":55},\"end\":{\"line\":10,\"column\":68}}}) : helper)))\n    + \"</p>\\n        <p><i class=\\\"material-icons\\\">visibility</i>\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":51},\"end\":{\"line\":11,\"column\":60}}}) : helper)))\n    + \"</p>\\n        <p><i class=\\\"material-icons\\\">visibility</i> \"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"duration\") || (depth0 != null ? lookupProperty(depth0,\"duration\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"duration\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":52},\"end\":{\"line\":12,\"column\":64}}}) : helper)))\n    + \"</p>\\n    </div>\\n\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":16,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\n  body: document.querySelector('body'),\n  form: document.getElementById('gallery-form'),\n  input: document.getElementById('query'),\n  galleryList: document.querySelector('.gallery-list'),\n};\n","const apiKey = '18623540-b96dabcd57ccb87763c2123d9';\nconst baseUrl = 'https://pixabay.com/api/';\n//URL-строка запроса:\n//https://pixabay.com/api/videos/?key=18623540-b96dabcd57ccb87763c2123d9&q=yellow+flowers\n\nexport default {\n  async getIllustration(query) {\n    try {\n      let additionalUrl = `videos/?key=${apiKey}&q=${query}`;\n\n      const result = await fetch(`${baseUrl}${additionalUrl}`);\n\n      return await result.json();\n    } catch (e) {\n      console.log(e);\n      return [];\n    }\n  },\n};\n","import refs from './refs.js';\nimport apiService from './apiService.js';\nimport template from '../templates/template.hbs';\n//import debounce from 'lodash.debounce';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basicLightbox/dist/basicLightbox.min.css';\nimport InfiniteScroll from 'infinite-scroll';\nimport { alert, error, defaultModules } from '@pnotify/core/dist/PNotify.js';\nimport * as PNotifyMobile from '@pnotify/mobile/dist/PNotifyMobile.js';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport '@pnotify/core/dist/PNotify.css';\ndefaultModules.set(PNotifyMobile, {});\n\nclass RenderIllustration {\n  constructor() {\n    this.page = 1;\n    this.perPage = 12;\n    this.query = '';\n  }\n  newQuery(query) {\n    this.page = 1;\n    this.query = query;\n    this.fetchApi();\n  }\n  showMore() {\n    this.page += 1;\n    this.fetchApi();\n  }\n  async fetchApi() {\n    const { hits } = await apiService.getIllustration(this.query);\n    if (!hits.length) {\n      return error({\n        text: 'Not found...try again...',\n        hide: true,\n        delay: 2000,\n      });\n    } else {\n      const videos = template(hits);\n      refs.galleryList.insertAdjacentHTML('beforeend', videos);\n      console.log(hits);\n    }\n  }\n}\n\nconst newRender = new RenderIllustration();\n\nrefs.form.addEventListener('submit', event => {\n  event.preventDefault();\n  refs.galleryList.innerHTML = '';\n  newRender.newQuery(event.target.elements.query.value);\n});\n\nrefs.galleryList.addEventListener('click', event => {\n  console.log(event.target.nodeName);\n  if (event.target.nodeName === 'VIDEO') {\n    let srcModal = event.target.dataset.src;\n    const instance = basicLightbox.create(`\n      <div class=\"modal\">\n          <video src=\"${srcModal}\" controls=\"controls\"> </video>\n      </div>\n  `);\n\n    instance.show();\n  }\n});\n\nconst infScroll = new InfiniteScroll(refs.galleryList, {\n  // options\n  path: '{{#}}',\n  history: false,\n});\ninfScroll.on('scrollThreshold', () => {\n  newRender.showMore();\n});\n"],"sourceRoot":""}